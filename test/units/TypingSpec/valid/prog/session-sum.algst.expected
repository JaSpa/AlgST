Arith
|
`- ProtoDecl
   |
   +- OriginUser
   |
   +- kind
   |  |
   |  `- P
   |
   +- parameters
   |
   `- constructors
      |
      +- Add
      |  |
      |  +- Type.Type
      |  |  |
      |  |  `- TypeRef
      |  |     |
      |  |     `- Int
      |  |
      |  +- Type.Type
      |  |  |
      |  |  `- TypeRef
      |  |     |
      |  |     `- Int
      |  |
      |  `- Type.Negate
      |     |
      |     `- Type.Type
      |        |
      |        `- TypeRef
      |           |
      |           `- Int
      |
      `- Neg
         |
         +- Type.Type
         |  |
         |  `- TypeRef
         |     |
         |     `- Int
         |
         `- Type.Negate
            |
            `- Type.Type
               |
               `- TypeRef
                  |
                  `- Int

List
|
`- DataDecl
   |
   +- OriginUser
   |
   +- kind
   |  |
   |  `- TU
   |
   +- parameters
   |  |
   |  `- (a:TU)
   |
   `- constructors
      |
      +- Cons
      |  |
      |  +- Type.Var 6#a
      |  |  |
      |  |  `- TU
      |  |
      |  `- Type.Type
      |     |
      |     `- TypeRef
      |        |
      |        +- List
      |        |
      |        `- Type.Var 6#a
      |           |
      |           `- TU
      |
      `- Nil

Repeat
|
`- ProtoDecl
   |
   +- OriginUser
   |
   +- kind
   |  |
   |  `- P
   |
   +- parameters
   |  |
   |  `- (p:P)
   |
   `- constructors
      |
      +- More
      |  |
      |  +- Type.Var 10#p
      |  |  |
      |  |  `- P
      |  |
      |  `- Type.Type
      |     |
      |     `- TypeRef
      |        |
      |        +- Repeat
      |        |
      |        `- Type.Var 10#p
      |           |
      |           `- P
      |
      `- Quit

Add
|
`- Decl.ProtocolCon (Arith)
   |
   +- OriginUser
   |
   +- parameters
   |
   `- items
      |
      +- Type.Type
      |  |
      |  `- TypeRef
      |     |
      |     `- Int
      |
      +- Type.Type
      |  |
      |  `- TypeRef
      |     |
      |     `- Int
      |
      `- Type.Negate
         |
         `- Type.Type
            |
            `- TypeRef
               |
               `- Int

Cons
|
`- Decl.DataCon (List)
   |
   +- OriginUser
   |
   +- parameters
   |  |
   |  `- (a:TU)
   |
   +- multiplicity
   |  |
   |  `- U
   |
   `- items
      |
      +- Type.Var 6#a
      |  |
      |  `- TU
      |
      `- Type.Type
         |
         `- TypeRef
            |
            +- List
            |
            `- Type.Var 6#a
               |
               `- TU

More
|
`- Decl.ProtocolCon (Repeat)
   |
   +- OriginUser
   |
   +- parameters
   |  |
   |  `- (p:P)
   |
   `- items
      |
      +- Type.Var 10#p
      |  |
      |  `- P
      |
      `- Type.Type
         |
         `- TypeRef
            |
            +- Repeat
            |
            `- Type.Var 10#p
               |
               `- P

Neg
|
`- Decl.ProtocolCon (Arith)
   |
   +- OriginUser
   |
   +- parameters
   |
   `- items
      |
      +- Type.Type
      |  |
      |  `- TypeRef
      |     |
      |     `- Int
      |
      `- Type.Negate
         |
         `- Type.Type
            |
            `- TypeRef
               |
               `- Int

Nil
|
`- Decl.DataCon (List)
   |
   +- OriginUser
   |
   +- parameters
   |  |
   |  `- (a:TU)
   |
   +- multiplicity
   |  |
   |  `- U
   |
   `- items

Quit
|
`- Decl.ProtocolCon (Repeat)
   |
   +- OriginUser
   |
   +- parameters
   |  |
   |  `- (p:P)
   |
   `- items

sum
|
+- type
|  |
|  `- Type.Arrow U
|     |
|     +- Type.Type
|     |  |
|     |  `- TypeRef
|     |     |
|     |     +- List
|     |     |
|     |     `- Type.Type
|     |        |
|     |        `- TypeRef
|     |           |
|     |           `- Int
|     |
|     `- Type.Arrow U
|        |
|        +- Type.Session (!)
|        |  |
|        |  +- Type.Type
|        |  |  |
|        |  |  `- TypeRef
|        |  |     |
|        |  |     +- Repeat
|        |  |     |
|        |  |     `- Type.Type
|        |  |        |
|        |  |        `- TypeRef
|        |  |           |
|        |  |           `- Arith
|        |  |
|        |  `- Type.End
|        |
|        `- Type.Type
|           |
|           `- TypeRef
|              |
|              `- Int
|
+- params
|
`- definition
   |
   `- Exp.Exp
      |
      `- TcExpX.ValueCase
         |
         +- Exp.Rec 57#go
         |  |
         |  +- Type.Arrow U
         |  |  |
         |  |  +- Type.Type
         |  |  |  |
         |  |  |  `- TypeRef
         |  |  |     |
         |  |  |     `- Int
         |  |  |
         |  |  `- Type.Arrow U
         |  |     |
         |  |     +- Type.Type
         |  |     |  |
         |  |     |  `- TypeRef
         |  |     |     |
         |  |     |     +- List
         |  |     |     |
         |  |     |     `- Type.Type
         |  |     |        |
         |  |     |        `- TypeRef
         |  |     |           |
         |  |     |           `- Int
         |  |     |
         |  |     `- Type.Arrow U
         |  |        |
         |  |        +- Type.Session (!)
         |  |        |  |
         |  |        |  +- Type.Type
         |  |        |  |  |
         |  |        |  |  `- TypeRef
         |  |        |  |     |
         |  |        |  |     +- Repeat
         |  |        |  |     |
         |  |        |  |     `- Type.Type
         |  |        |  |        |
         |  |        |  |        `- TypeRef
         |  |        |  |           |
         |  |        |  |           `- Arith
         |  |        |  |
         |  |        |  `- Type.End
         |  |        |
         |  |        `- Type.Type
         |  |           |
         |  |           `- TypeRef
         |  |              |
         |  |              `- Int
         |  |
         |  `- Exp.Abs U 58#acc
         |     |
         |     +- Type.Type
         |     |  |
         |     |  `- TypeRef
         |     |     |
         |     |     `- Int
         |     |
         |     `- Exp.Abs U 59#xs
         |        |
         |        +- Type.Type
         |        |  |
         |        |  `- TypeRef
         |        |     |
         |        |     +- List
         |        |     |
         |        |     `- Type.Type
         |        |        |
         |        |        `- TypeRef
         |        |           |
         |        |           `- Int
         |        |
         |        `- Exp.Abs U 60#c
         |           |
         |           +- Type.Session (!)
         |           |  |
         |           |  +- Type.Type
         |           |  |  |
         |           |  |  `- TypeRef
         |           |  |     |
         |           |  |     +- Repeat
         |           |  |     |
         |           |  |     `- Type.Type
         |           |  |        |
         |           |  |        `- TypeRef
         |           |  |           |
         |           |  |           `- Arith
         |           |  |
         |           |  `- Type.End
         |           |
         |           `- Exp.Exp
         |              |
         |              `- TcExpX.ValueCase
         |                 |
         |                 +- Exp.Var 59#xs
         |                 |
         |                 +- Cons 62#xs 61#x
         |                 |  |
         |                 |  `- Exp.Exp
         |                 |     |
         |                 |     `- TcExpX.ValueCase
         |                 |        |
         |                 |        +- Exp.App
         |                 |        |  |
         |                 |        |  +- Exp.TypeApp
         |                 |        |  |  |
         |                 |        |  |  +- Exp.TypeApp
         |                 |        |  |  |  |
         |                 |        |  |  |  +- Exp.Select More
         |                 |        |  |  |  |
         |                 |        |  |  |  `- Type.Type
         |                 |        |  |  |     |
         |                 |        |  |  |     `- TypeRef
         |                 |        |  |  |        |
         |                 |        |  |  |        `- Arith
         |                 |        |  |  |
         |                 |        |  |  `- Type.End
         |                 |        |  |
         |                 |        |  `- Exp.Var 60#c
         |                 |        |
         |                 |        `- 63#c
         |                 |           |
         |                 |           `- Exp.Exp
         |                 |              |
         |                 |              `- TcExpX.ValueCase
         |                 |                 |
         |                 |                 +- Exp.App
         |                 |                 |  |
         |                 |                 |  +- Exp.TypeApp
         |                 |                 |  |  |
         |                 |                 |  |  +- Exp.Select Add
         |                 |                 |  |  |
         |                 |                 |  |  `- Type.Session (!)
         |                 |                 |  |     |
         |                 |                 |  |     +- Type.Type
         |                 |                 |  |     |  |
         |                 |                 |  |     |  `- TypeRef
         |                 |                 |  |     |     |
         |                 |                 |  |     |     +- Repeat
         |                 |                 |  |     |     |
         |                 |                 |  |     |     `- Type.Type
         |                 |                 |  |     |        |
         |                 |                 |  |     |        `- TypeRef
         |                 |                 |  |     |           |
         |                 |                 |  |     |           `- Arith
         |                 |                 |  |     |
         |                 |                 |  |     `- Type.End
         |                 |                 |  |
         |                 |                 |  `- Exp.Var 63#c
         |                 |                 |
         |                 |                 `- 64#c
         |                 |                    |
         |                 |                    `- Exp.Exp
         |                 |                       |
         |                 |                       `- TcExpX.ValueCase
         |                 |                          |
         |                 |                          +- Exp.App
         |                 |                          |  |
         |                 |                          |  +- Exp.App
         |                 |                          |  |  |
         |                 |                          |  |  +- Exp.TypeApp
         |                 |                          |  |  |  |
         |                 |                          |  |  |  +- Exp.TypeApp
         |                 |                          |  |  |  |  |
         |                 |                          |  |  |  |  +- Exp.Var send
         |                 |                          |  |  |  |  |
         |                 |                          |  |  |  |  `- Type.Type
         |                 |                          |  |  |  |     |
         |                 |                          |  |  |  |     `- TypeRef
         |                 |                          |  |  |  |        |
         |                 |                          |  |  |  |        `- Int
         |                 |                          |  |  |  |
         |                 |                          |  |  |  `- Type.Session (!)
         |                 |                          |  |  |     |
         |                 |                          |  |  |     +- Type.Type
         |                 |                          |  |  |     |  |
         |                 |                          |  |  |     |  `- TypeRef
         |                 |                          |  |  |     |     |
         |                 |                          |  |  |     |     `- Int
         |                 |                          |  |  |     |
         |                 |                          |  |  |     `- Type.Session (?)
         |                 |                          |  |  |        |
         |                 |                          |  |  |        +- Type.Type
         |                 |                          |  |  |        |  |
         |                 |                          |  |  |        |  `- TypeRef
         |                 |                          |  |  |        |     |
         |                 |                          |  |  |        |     `- Int
         |                 |                          |  |  |        |
         |                 |                          |  |  |        `- Type.Session (!)
         |                 |                          |  |  |           |
         |                 |                          |  |  |           +- Type.Type
         |                 |                          |  |  |           |  |
         |                 |                          |  |  |           |  `- TypeRef
         |                 |                          |  |  |           |     |
         |                 |                          |  |  |           |     +- Repeat
         |                 |                          |  |  |           |     |
         |                 |                          |  |  |           |     `- Type.Type
         |                 |                          |  |  |           |        |
         |                 |                          |  |  |           |        `- TypeRef
         |                 |                          |  |  |           |           |
         |                 |                          |  |  |           |           `- Arith
         |                 |                          |  |  |           |
         |                 |                          |  |  |           `- Type.End
         |                 |                          |  |  |
         |                 |                          |  |  `- Exp.Var 61#x
         |                 |                          |  |
         |                 |                          |  `- Exp.Var 64#c
         |                 |                          |
         |                 |                          `- 65#c
         |                 |                             |
         |                 |                             `- Exp.Exp
         |                 |                                |
         |                 |                                `- TcExpX.ValueCase
         |                 |                                   |
         |                 |                                   +- Exp.App
         |                 |                                   |  |
         |                 |                                   |  +- Exp.App
         |                 |                                   |  |  |
         |                 |                                   |  |  +- Exp.TypeApp
         |                 |                                   |  |  |  |
         |                 |                                   |  |  |  +- Exp.TypeApp
         |                 |                                   |  |  |  |  |
         |                 |                                   |  |  |  |  +- Exp.Var send
         |                 |                                   |  |  |  |  |
         |                 |                                   |  |  |  |  `- Type.Type
         |                 |                                   |  |  |  |     |
         |                 |                                   |  |  |  |     `- TypeRef
         |                 |                                   |  |  |  |        |
         |                 |                                   |  |  |  |        `- Int
         |                 |                                   |  |  |  |
         |                 |                                   |  |  |  `- Type.Session (?)
         |                 |                                   |  |  |     |
         |                 |                                   |  |  |     +- Type.Type
         |                 |                                   |  |  |     |  |
         |                 |                                   |  |  |     |  `- TypeRef
         |                 |                                   |  |  |     |     |
         |                 |                                   |  |  |     |     `- Int
         |                 |                                   |  |  |     |
         |                 |                                   |  |  |     `- Type.Session (!)
         |                 |                                   |  |  |        |
         |                 |                                   |  |  |        +- Type.Type
         |                 |                                   |  |  |        |  |
         |                 |                                   |  |  |        |  `- TypeRef
         |                 |                                   |  |  |        |     |
         |                 |                                   |  |  |        |     +- Repeat
         |                 |                                   |  |  |        |     |
         |                 |                                   |  |  |        |     `- Type.Type
         |                 |                                   |  |  |        |        |
         |                 |                                   |  |  |        |        `- TypeRef
         |                 |                                   |  |  |        |           |
         |                 |                                   |  |  |        |           `- Arith
         |                 |                                   |  |  |        |
         |                 |                                   |  |  |        `- Type.End
         |                 |                                   |  |  |
         |                 |                                   |  |  `- Exp.Var 58#acc
         |                 |                                   |  |
         |                 |                                   |  `- Exp.Var 65#c
         |                 |                                   |
         |                 |                                   `- 66#c
         |                 |                                      |
         |                 |                                      `- Exp.Exp
         |                 |                                         |
         |                 |                                         `- TcExpX.ValueCase
         |                 |                                            |
         |                 |                                            +- Exp.App
         |                 |                                            |  |
         |                 |                                            |  +- Exp.TypeApp
         |                 |                                            |  |  |
         |                 |                                            |  |  +- Exp.TypeApp
         |                 |                                            |  |  |  |
         |                 |                                            |  |  |  +- Exp.Var receive
         |                 |                                            |  |  |  |
         |                 |                                            |  |  |  `- Type.Type
         |                 |                                            |  |  |     |
         |                 |                                            |  |  |     `- TypeRef
         |                 |                                            |  |  |        |
         |                 |                                            |  |  |        `- Int
         |                 |                                            |  |  |
         |                 |                                            |  |  `- Type.Session (!)
         |                 |                                            |  |     |
         |                 |                                            |  |     +- Type.Type
         |                 |                                            |  |     |  |
         |                 |                                            |  |     |  `- TypeRef
         |                 |                                            |  |     |     |
         |                 |                                            |  |     |     +- Repeat
         |                 |                                            |  |     |     |
         |                 |                                            |  |     |     `- Type.Type
         |                 |                                            |  |     |        |
         |                 |                                            |  |     |        `- TypeRef
         |                 |                                            |  |     |           |
         |                 |                                            |  |     |           `- Arith
         |                 |                                            |  |     |
         |                 |                                            |  |     `- Type.End
         |                 |                                            |  |
         |                 |                                            |  `- Exp.Var 66#c
         |                 |                                            |
         |                 |                                            `- (,) 68#c 67#acc'
         |                 |                                               |
         |                 |                                               `- Exp.App
         |                 |                                                  |
         |                 |                                                  +- Exp.App
         |                 |                                                  |  |
         |                 |                                                  |  +- Exp.App
         |                 |                                                  |  |  |
         |                 |                                                  |  |  +- Exp.Var 57#go
         |                 |                                                  |  |  |
         |                 |                                                  |  |  `- Exp.Var 67#acc'
         |                 |                                                  |  |
         |                 |                                                  |  `- Exp.Var 62#xs
         |                 |                                                  |
         |                 |                                                  `- Exp.Var 68#c
         |                 |
         |                 `- Nil
         |                    |
         |                    `- Exp.Exp
         |                       |
         |                       `- TcExpX.ValueCase
         |                          |
         |                          +- Exp.App
         |                          |  |
         |                          |  +- Exp.TypeApp
         |                          |  |  |
         |                          |  |  +- Exp.TypeApp
         |                          |  |  |  |
         |                          |  |  |  +- Exp.Select Quit
         |                          |  |  |  |
         |                          |  |  |  `- Type.Type
         |                          |  |  |     |
         |                          |  |  |     `- TypeRef
         |                          |  |  |        |
         |                          |  |  |        `- Arith
         |                          |  |  |
         |                          |  |  `- Type.End
         |                          |  |
         |                          |  `- Exp.Var 60#c
         |                          |
         |                          `- 69#_
         |                             |
         |                             `- Exp.Var 58#acc
         |
         `- 70#go
            |
            `- Exp.App
               |
               +- Exp.Var 70#go
               |
               `- Exp.Lit
                  |
                  `- Lit.Int 0

